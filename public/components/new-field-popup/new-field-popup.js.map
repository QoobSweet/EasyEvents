{"version":3,"file":"new-field-popup.js","sourceRoot":"","sources":["../../../src/components/new-field-popup/new-field-popup.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html } from 'lit';\r\nimport { customElement, property, state } from 'lit/decorators.js';\r\nimport ServerApi from '../../api/serverApi';\r\nimport { AccessData, UserI } from '../../definitions/definitions';\r\nimport '@material/mwc-list/mwc-list-item';\r\nimport '@material/mwc-button';\r\nimport '@material/mwc-icon-button';\r\nimport '@material/mwc-textfield';\r\nimport '@material/mwc-select';\r\nimport { style } from './new-field-popup-css';\r\nimport { DbDoc } from '../../definitions/dbDoc';\r\n\r\n@customElement('new-field-popup')\r\nexport class NewFieldPopup extends LitElement {\r\n  @property({ type: Object }) user: UserI | null = null;\r\n  @property({ attribute: false }) docObject: DbDoc | null = null;\r\n  @state() fieldValue: AccessData | null = null;\r\n  serverApi = ServerApi();\r\n\r\n  static styles = style;\r\n\r\n  closePopup = () => {\r\n    const event = new CustomEvent('closepopup', {\r\n      detail: {\r\n        message: 'Closing Popup'\r\n      },\r\n      bubbles: true,\r\n      composed: true\r\n    });\r\n    this.dispatchEvent(event);\r\n  }\r\n  \r\n  fieldTypes = [\r\n    ['text', \"Text\"],\r\n    ['number', \"Number\"],\r\n    ['email', \"Email\"],\r\n    ['datetime-local', \"Date & Time\"],\r\n    ['time', \"Time\"]\r\n  ]\r\n\r\n  submitField = () => {\r\n    if (this.user && this.docObject && this.fieldValue) {\r\n      //valid, get position index\r\n      this.fieldValue.positionIndex = Object.entries(this.docObject).length;\r\n\r\n      this.docObject.updateField(this.serverApi, this.fieldValue.label, this.fieldValue);\r\n      this.closePopup();\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    if (this.fieldValue && this.fieldValue?.type !== 'select' && this.fieldValue?.type !== 'coorespondence') {\r\n      return html`\r\n        <div id=\"new-field-popup\">\r\n          <div id=\"pop-up-window\">\r\n            <div class=\"button-collection-wrapper\">\r\n              <h2>Insert New Field</h2>\r\n              <div class=\"button-collection\">\r\n                <div class=\"button-wrapper\">\r\n                  <mwc-icon-button class=\"delete-icon\" icon=\"close\" @click=\"${this.closePopup}\"></mwc-icon-button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div id=\"popup-fields\">\r\n              <mwc-select label=\"Field Type\"\r\n                @selected=\"${(e: any) => {\r\n                  if (this.fieldValue) {\r\n                    this.fieldValue.type = e.path[9].value.toString();\r\n                    this.requestUpdate();\r\n                  }\r\n                }}\"\r\n              >\r\n                ${this.fieldTypes.map(fieldType => { return html`\r\n                  <mwc-list-item value=\"${fieldType[0]}\">${fieldType[1]}</mwc-list-item>\r\n                `;})}\r\n              </mwc-select>\r\n            </div>\r\n            <div id=\"popup-fields\">\r\n              <mwc-textfield\r\n                label=\"Field Label\"\r\n                value=\"\"\r\n                type=\"text\"\r\n                @change=\"${(e: any) => {\r\n              if (this.fieldValue) {\r\n                this.fieldValue.label = e.path[0].value\r\n              }\r\n            }}\"\r\n                >\r\n              </mwc-textfield>\r\n              <mwc-textfield\r\n                label=\"Field Value\"\r\n                value=\"\"\r\n                type=\"${this.fieldValue.type}\"\r\n                @change=\"${(e: any) => {\r\n                  if (this.fieldValue) {\r\n                    this.fieldValue.value = e.path[0].value\r\n                  }\r\n                }}\"\r\n              >\r\n              </mwc-textfield>\r\n            </div>\r\n            <div id=\"popup-fields\">\r\n              <div class=\"button-collection-wrapper\">\\\r\n                <div class=\"button-collection\">\r\n                  <div class=\"button-wrapper\">\r\n                    <mwc-button outlined\r\n                      label=\"Submit\"\r\n                      @click=\"${this.submitField}\"\r\n                      >\r\n                    </mwc-button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\r\n    } else {\r\n      return html``;\r\n    }\r\n  }\r\n}"]}