{"version":3,"file":"business-index.js","sourceRoot":"","sources":["../../../src/routes/business/business-index.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css, TemplateResult } from 'lit';\r\nimport { customElement, property, state } from 'lit/decorators.js';\r\nimport { doc } from 'rxfire/firestore';\r\nimport '@material/mwc-button';\r\nimport '@material/mwc-drawer';\r\nimport '@material/mwc-list';\r\nimport '@material/mwc-list/mwc-list-item';\r\nimport '@material/mwc-icon';\r\nimport '@material/mwc-icon-button';\r\nimport '@material/mwc-top-app-bar';\r\nimport '../../components/page-display/page-display';\r\nimport '../../components/content-wrapper/content-wrapper';\r\nimport './pages/client-page/client-page';\r\nimport './pages/account/account-index';\r\nimport ServerApi from '../../api/serverApi';\r\nimport { UserI } from '../../definitions/definitions';\r\n//elements\r\n\r\ninterface PageItem {\r\n  label: String;\r\n  target: String;\r\n  active: Boolean;\r\n  render: TemplateResult;\r\n}\r\n\r\n@customElement('business-index')\r\nexport class BusinessIndex extends LitElement {\r\n  @property({ type: Boolean }) open = true;\r\n  @property({ type: Object }) user: UserI | null = null;\r\n  @property({ type: String }) selectedPage = \"clients-display\";\r\n  @state() clients = null;\r\n  @state() inquiries = null;\r\n  serverApi = ServerApi();\r\n\r\n  static styles = css`\r\n    :host {\r\n      --mdc-drawer-width: 200px;\r\n    }\r\n    #main-content-wrapper {\r\n      position: fixed;\r\n      bottom: 0;\r\n      right:0;\r\n    }\r\n    #appContent {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n    }\r\n  `;\r\n  firstUpdated = () => { this.subscribeToFirebase(); }\r\n\r\n  subscribeToFirebase = () => {\r\n    if (this.user && this.user.uid) {\r\n      const userDocRef = this.serverApi.firestore.doc('users/' + this.user.uid);\r\n      doc(userDocRef).subscribe(snapshot => {\r\n        console.log(snapshot.id);\r\n        console.log(snapshot.data());\r\n      });\r\n\r\n\r\n      /*     this.serverApi.socket.on(\"dbInquiries\", (data, callback) => {\r\n            console.log('recieving inquiries');\r\n            if(data.inquiries !== this.inquiries) {\r\n              this.inquiries = data.inquiries;\r\n            } \r\n      \r\n            if (data.inquiries) { callback({ status: 'recieved' }); }\r\n            else { callback({ status: 'failed' }); }\r\n          });\r\n      \r\n          this.serverApi.socket.on(\"dbClients\", (data, callback) => {\r\n            console.log('recieving clients');\r\n            console.log(data);\r\n            if (data.clients !== this.clients) {\r\n              this.clients = data.clients;\r\n            }\r\n            console.log(this.clients);\r\n      \r\n            if (data.clients) { callback({ status: 'recieved' }); }\r\n            else { callback({ status: 'failed' }); }\r\n          }); */\r\n    }\r\n  }\r\n\r\n  \r\n\r\n  createPage = (label: string, target: string, html: TemplateResult): PageItem => {\r\n    return { label: label, target: target, active: target === this.selectedPage, render: html };\r\n  }\r\n\r\n  pages = () => {\r\n    return [\r\n    this.createPage(\"Clients\", \"clients-display\", html`\r\n      <clients-page slot=\"content\" .user=\"${this.user}\" .clients=\"${this.clients}\" .inquiries=\"${this.inquiries}\"></clients-page>\r\n    `),\r\n    this.createPage(\"Ongoing\", \"out-for-sign-page\", html`\r\n    `),\r\n    this.createPage(\"Bookings\", \"bookings-page\", html`\r\n    `),\r\n    this.createPage(\"My Account\", \"business-home\", html`\r\n      <account-index .user=\"${this.user}\"></account-index>\r\n    `),\r\n  ]}\r\n\r\n  openDrawer = () => { this.open = !this.open; }\r\n  \r\n  render() {\r\n    if (this.user) {\r\n      return html`\r\n        <page-display>\r\n          <mwc-drawer id=\"main-content-wrapper\" slot=\"content\" type=\"dismissible\" ?open=\"${this.open}\">\r\n            <mwc-list-item twoline graphic=\"large\" noninteractive>\r\n              <span>${this.user.displayName}</span>\r\n              <span slot=\"secondary\">${this.user.email}</span>\r\n              <mwc-icon slot=\"graphic\" class=\"inverted\">account_circle</mwc-icon>\r\n            </mwc-list-item>  \r\n            <mwc-list activatable>\r\n              ${this.pages().map(page => {\r\n                if (this.selectedPage == page.target) { return html`\r\n                  <!-- <li divider role=\"separator\"></li> -->\r\n                  <mwc-list-item twoline @click=\"${() => { this.selectedPage = page.target.toString(); this.openDrawer; }}\" selected activated>${page.label}\r\n                  </mwc-list-item>\r\n                `} else { return html`\r\n                  <mwc-list-item twoline @click=\"${() => { this.selectedPage = page.target.toString(); this.openDrawer; }}\">${page.label}</mwc-list-item>\r\n                `}\r\n              })}\r\n            </mwc-list>\r\n            <div id=\"appContent\" slot=\"appContent\">\r\n                <mwc-top-app-bar>\r\n                  <mwc-icon-button slot=\"navigationIcon\" @click=\"${this.openDrawer}\">\r\n                    <svg viewBox=\"0 0 100 80\" width=\"40\" height=\"40\"><rect width=\"100\" height=\"20\"></rect><rect y=\"30\" width=\"100\" height=\"20\"></rect><rect y=\"60\" width=\"100\" height=\"20\"></rect></svg>\r\n                  </mwc-icon-button>\r\n                    <div slot=\"title\">Easy Events for Business</div>\r\n                </mwc-top-app-bar>\r\n                ${\r\n          //this.pages().filter(page => page.target === this.selectedPage)[0].render\r\n          html``}\r\n            </div>\r\n          </mwc-drawer>\r\n        </page-display>\r\n      `;\r\n    } else {\r\n      return html``;\r\n    }\r\n  }\r\n  \r\n}"]}