{"version":3,"file":"auth-index.js","sourceRoot":"","sources":["../../../src/routes/auth/auth-index.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AACvC,OAAO,EAAE,aAAa,EAAC,MAAM,mBAAmB,CAAC;AACjD,OAAO,QAAQ,MAAM,UAAU,CAAC;AAChC,OAAO,4CAA4C,CAAC;AACpD,OAAO,kDAAkD,CAAC;AAC1D,OAAO,4CAA4C,CAAC;AACpD,OAAO,EAAE,KAAK,EAAE,MAAM,kBAAkB,CAAC;AACzC,OAAO,SAAS,MAAM,qBAAqB,CAAC;AAG5C,IAAa,SAAS,GAAtB,MAAa,SAAU,SAAQ,UAAU;IACvC,SAAS,GAAG,SAAS,EAAE,CAAC;IACxB,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;IAGtB,iBAAiB,GAAG,GAAS,EAAE;QAC7B,MAAM,WAAW,GAAG,CAAC,KAAc,EAAE,IAAmB,EAAE,EAAE;YAC1D,MAAM,KAAK,GAAG,IAAI,WAAW,CAAC,cAAc,EAAE;gBAC5C,8BAA8B;gBAC9B,MAAM,EAAE;oBACN,IAAI,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE;oBAC9C,OAAO,EAAE,8BAA8B;iBACxC;gBACD,OAAO,EAAE,IAAI;gBACb,QAAQ,EAAE,IAAI;aACf,CAAC,CAAC;YACH,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC,CAAA;QACD,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAExD,QAAQ,CAAC,IAAI,EAAE;aACd,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;aACtD,IAAI,CAAC,GAAG,EAAE;YACT,QAAQ,CAAC,IAAI,EAAE;iBACd,eAAe,CAAC,QAAQ,CAAC;iBACvB,IAAI,CAAC,CAAC,MAAoC,EAAE,EAAE;gBAC7C,IAAI,MAAM,CAAC,IAAI,EAAE;oBACf,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;iBAChC;YACL,CAAC,CAAC;iBACD,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;QAC7B,CAAC,CAAC,CAAA;IACJ,CAAC,CAAA;IAED,MAAM;QACJ,iHAAiH;QACjH,OAAO,IAAI,CAAA;;;;8CAI+B,IAAI,CAAC,iBAAiB;;;;;;;;;;;;;;;KAe/D,CAAC;IACJ,CAAC;CAEF,CAAA;AA1DY,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CA0DrB;SA1DY,SAAS","sourcesContent":["import { LitElement, html } from 'lit';\r\nimport { customElement} from 'lit/decorators.js';\r\nimport firebase from 'firebase';\r\nimport '../../components/page-display/page-display';\r\nimport '../../components/content-wrapper/content-wrapper';\r\nimport '../../components/content-item/content-item';\r\nimport { style } from './auth-index-css';\r\nimport ServerApi from '../../api/serverApi';\r\n\r\n@customElement('auth-index')\r\nexport class AuthIndex extends LitElement {\r\n  serverApi = ServerApi();\r\n  static styles = style;\r\n\r\n\r\n  handleGoogleLogin = (): void => {\r\n    const loginChange = (state: Boolean, user: firebase.User) => {\r\n      const event = new CustomEvent('login-change', {\r\n        //uneeded event data as of now\r\n        detail: {\r\n          data: { 'state': state, 'firebaseUser': user },\r\n          message: 'Something important happened'\r\n        },\r\n        bubbles: true,\r\n        composed: true\r\n      });\r\n      this.dispatchEvent(event);\r\n    }\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n\r\n    firebase.auth()\r\n    .setPersistence(firebase.auth.Auth.Persistence.SESSION)\r\n    .then(() => {\r\n      firebase.auth()\r\n      .signInWithPopup(provider)\r\n        .then((result: firebase.auth.UserCredential) => {\r\n          if (result.user) {\r\n            loginChange(true, result.user);\r\n          }\r\n      })\r\n      .catch(e => console.log(e))\r\n    })\r\n  }\r\n\r\n  render() {\r\n    //Page Display is the framework that renders the app. everything nested should use slots provided by page-display\r\n    return html`\r\n    <page-display>\r\n        <content-item slot=\"content\">\r\n          <div class=\"block-wrap\">\r\n              <a class=\"btn-google\" @click='${this.handleGoogleLogin}'>\r\n                <div class=\"google-content\">\r\n                  <div class=\"logo\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 48 48\">\r\n                    <defs><path id=\"a\" d=\"M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z\"/></defs><clipPath id=\"b\"><use xlink:href=\"#a\" overflow=\"visible\"/></clipPath><path clip-path=\"url(#b)\" fill=\"#FBBC05\" d=\"M0 37V11l17 13z\"/><path clip-path=\"url(#b)\" fill=\"#EA4335\" d=\"M0 11l17 13 7-6.1L48 14V0H0z\"/><path clip-path=\"url(#b)\" fill=\"#34A853\" d=\"M0 37l30-23 7.9 1L48 0v48H0z\"/><path clip-path=\"url(#b)\" fill=\"#4285F4\" d=\"M48 48L17 24l-4-3 35-10z\"/>\r\n                  </svg>\r\n                  </div>\r\n                  <div class=\"label\">\r\n                    <p>Sign in with Google</p>\r\n                  </div>\r\n                </div>\r\n              </a>\r\n          </div>\r\n        </content-item>\r\n    </page-display>\r\n    `;\r\n  }\r\n  \r\n}"]}